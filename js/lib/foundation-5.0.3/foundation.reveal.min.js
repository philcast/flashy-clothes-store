(function(c,b,a,d){Foundation.libs.reveal={name:"reveal",version:"5.0.3",locked:false,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:true,close_on_esc:true,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:c(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(f,g,e){Foundation.inherit(this,"delay");c.extend(true,this.settings,g,e);this.bindings(g,e)},events:function(f){var e=this;c("[data-reveal-id]",this.scope).off(".reveal").on("click.fndtn.reveal",function(j){j.preventDefault();if(!e.locked){var h=c(this),i=h.data("reveal-ajax");e.locked=true;if(typeof i==="undefined"){e.open.call(e,h)}else{var g=i===true?h.attr("href"):i;e.open.call(e,h,{url:g})}}});c(this.scope).off(".reveal");c(a).on("click.fndtn.reveal",this.close_targets(),function(h){h.preventDefault();if(!e.locked){var g=c("[data-reveal].open").data("reveal-init"),i=c(h.target)[0]===c("."+g.bg_class)[0];if(i&&!g.close_on_background_click){return}e.locked=true;e.close.call(e,i?c("[data-reveal].open"):c(this).closest("[data-reveal]"))}});if(c("[data-reveal]",this.scope).length>0){c(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video)}else{c(this.scope).on("open.fndtn.reveal","[data-reveal]",this.settings.open).on("opened.fndtn.reveal","[data-reveal]",this.settings.opened).on("opened.fndtn.reveal","[data-reveal]",this.open_video).on("close.fndtn.reveal","[data-reveal]",this.settings.close).on("closed.fndtn.reveal","[data-reveal]",this.settings.closed).on("closed.fndtn.reveal","[data-reveal]",this.close_video)}return true},key_up_on:function(f){var e=this;c("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(i){var g=c("[data-reveal].open"),h=g.data("reveal-init");if(h&&i.which===27&&h.close_on_esc&&!e.locked){e.close.call(e,g)}});return true},key_up_off:function(e){c("body").off("keyup.fndtn.reveal");return true},open:function(i,j){var f=this;if(i){if(typeof i.selector!=="undefined"){var h=c("#"+i.data("reveal-id"))}else{var h=c(this.scope);j=i}}else{var h=c(this.scope)}var g=h.data("reveal-init");if(!h.hasClass("open")){var e=c("[data-reveal].open");if(typeof h.data("css-top")==="undefined"){h.data("css-top",parseInt(h.css("top"),10)).data("offset",this.cache_offset(h))}this.key_up_on(h);h.trigger("open");if(e.length<1){this.toggle_bg(h)}if(typeof j==="string"){j={url:j}}if(typeof j==="undefined"||!j.url){if(e.length>0){var l=e.data("reveal-init");this.hide(e,l.css.close)}this.show(h,g.css.open)}else{var k=typeof j.success!=="undefined"?j.success:null;c.extend(j,{success:function(n,p,m){if(c.isFunction(k)){k(n,p,m)}h.html(n);c(h).foundation("section","reflow");if(e.length>0){var o=e.data("reveal-init");f.hide(e,o.css.close)}f.show(h,g.css.open)}});c.ajax(j)}}},close:function(g){var g=g&&g.length?g:c(this.scope),f=c("[data-reveal].open"),e=g.data("reveal-init");if(f.length>0){this.locked=true;this.key_up_off(g);g.trigger("close");this.toggle_bg(g);this.hide(f,e.css.close,e)}},close_targets:function(){var e="."+this.settings.dismiss_modal_class;if(this.settings.close_on_background_click){return e+", ."+this.settings.bg_class}return e},toggle_bg:function(f){var e=f.data("reveal-init");if(c("."+this.settings.bg_class).length===0){this.settings.bg=c("<div />",{"class":this.settings.bg_class}).appendTo("body")}if(this.settings.bg.filter(":visible").length>0){this.hide(this.settings.bg)}else{this.show(this.settings.bg)}},show:function(i,g){if(g){var h=i.data("reveal-init");if(i.parent("body").length===0){var j=i.wrap('<div style="display: none;" />').parent(),e=this.settings.rootElement||"body";i.on("closed.fndtn.reveal.wrapped",function(){i.detach().appendTo(j);i.unwrap().unbind("closed.fndtn.reveal.wrapped")});i.detach().appendTo(e)}if(/pop/i.test(h.animation)){g.top=c(b).scrollTop()-i.data("offset")+"px";var f={top:c(b).scrollTop()+i.data("css-top")+"px",opacity:1};return this.delay(function(){return i.css(g).animate(f,h.animation_speed,"linear",function(){this.locked=false;i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),h.animation_speed/2)}if(/fade/i.test(h.animation)){var f={opacity:1};return this.delay(function(){return i.css(g).animate(f,h.animation_speed,"linear",function(){this.locked=false;i.trigger("opened")}.bind(this)).addClass("open")}.bind(this),h.animation_speed/2)}return i.css(g).show().css({opacity:1}).addClass("open").trigger("opened")}var h=this.settings;if(/fade/i.test(h.animation)){return i.fadeIn(h.animation_speed/2)}return i.show()},hide:function(h,f){if(f){var g=h.data("reveal-init");if(/pop/i.test(g.animation)){var e={top:-c(b).scrollTop()-h.data("offset")+"px",opacity:0};return this.delay(function(){return h.animate(e,g.animation_speed,"linear",function(){this.locked=false;h.css(f).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),g.animation_speed/2)}if(/fade/i.test(g.animation)){var e={opacity:0};return this.delay(function(){return h.animate(e,g.animation_speed,"linear",function(){this.locked=false;h.css(f).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),g.animation_speed/2)}return h.hide().css(f).removeClass("open").trigger("closed")}var g=this.settings;if(/fade/i.test(g.animation)){return h.fadeOut(g.animation_speed/2)}return h.hide()},close_video:function(h){var g=c(this).find(".flex-video"),f=g.find("iframe");if(f.length>0){f.attr("data-src",f[0].src);f.attr("src","about:blank");g.hide()}},open_video:function(h){var g=c(this).find(".flex-video"),f=g.find("iframe");if(f.length>0){var j=f.attr("data-src");if(typeof j==="string"){f[0].src=f.attr("data-src")}else{var i=f[0].src;f[0].src=d;f[0].src=i}g.show()}},cache_offset:function(e){var f=e.show().height()+parseInt(e.css("top"),10);e.hide();return f},off:function(){c(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,this,this.document));